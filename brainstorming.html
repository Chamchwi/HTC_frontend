<!DOCTYPE html>
<html>
<head>
	<title>HTC-"방제목"</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no"/>

	<!-- CSS  -->
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<link href="css/materialize.css" type="text/css" rel="stylesheet" media="screen,projection"/>
	<link href="css/style.css" type="text/css" rel="stylesheet" media="screen,projection"/>
</head>

<body>
	<!-- 메인 페이지 -->
	<nav id="home" class="white" role="navigation">
  	<div class="nav-wrapper container">
    		<a id="logo-container" href="#" class="brand-logo waves-effect">방 제목</a>
    		<ul class="right hide-on-med-and-down">
      		<li><a class="navButton modal-trigger" href="#exitModal">EXIT</a></li>
    		</ul>
    		<ul id="nav-mobile" class="side-nav">
      		<li><a class="navButton modal-trigger" href="#exitModal">EXIT</a></li>
    		</ul>
    		<a href="#" data-activates="nav-mobile" class="button-collapse"><i class="material-icons">menu</i></a>
  	</div>
	</nav>

	<div class="container"  style="width: 100%">
  	<div class="section">
  		<!-- <form action="#">
  			<p class="range-field">
    		  <input type="range" id="test5" min="0" max="100" value="20" disabled />
  			</p>
			</form> -->
    		<div class="row">
          <div class="col s3 center">
        		  <h3><i class="mdi-content-send brown-text"></i></h3>
        			<h5>Chatting room</h5>
        			<div id="chattingList" type="text" value="??? joined." disabled
        			style="width:100%; height:400px; border:1px solid; border-color: black; overflow:auto;">
                <p align="left">??? joined.</p>
                <p align="right" style="color: red;">나 : 빼애애애애애애애액!!</p>
              </div>
      		</div>
      		<div class="col s9 center">
        			<h3><i class="mdi-content-send brown-text"></i></h3>
        			<h5>Idea Sketch Board</h5>
        			<canvas id="ideaBoard" style="width:100%; height:400px; border:1px solid; border-color: black; ">
        			</canvas>
      		</div>
    		</div>
    		<div class="row">
      		<div class="input-field col s3">
        			<input id="first_name" type="text" class="validate" length="30" maxLength="30" onkeydown="enterMessage(event, this)">
        			<label for="first_name">Enter the message.</label>
      		</div>
      		<div class="input-field col s3"> <!-- 의견도형을 그리는 지옥의 소스코드 -->
        			<input id="first_name" type="text" class="validate" length="10" maxLength="10" onkeydown="enterOpinion(event, this)">
        			<label for="first_name">Enter the your opinion.</label>
      		</div>
          <div class="input-field col s3"> <!-- 의견도형을 그리는 지옥의 소스코드 -->
              <a class="waves-effect waves-light btn" onclick="removeOpinion()"><i class="material-icons left">no_sim</i>의견 삭제</a>
          </div>
          <div class="input-field col s3"> <!-- 의견도형을 그리는 지옥의 소스코드 -->
              <a class="waves-effect waves-light btn modal-trigger" href="#mergeModal"><i class="material-icons left">play_arrow</i>다음 단계로(임시 그룹화 버튼)</a>
          </div>
    		</div>
        <hr>
        <div class="row">

        </div>
  	</div>
	</div>

  <!-- 그룹화된 의견들이 모이는 표 -->
  <div style="padding-right: 200px; padding-left: 200px">
    <ul id="mergedOpinions" class="collection">
    </ul>
  </div>

  <!-- 입장 하기 modal -->
  <div id="exitModal" class="modal modal-footer">
    <div class="modal-content">
      <h5>나가기</h5>
      <div class="row">
    <form id="exitForm" class="col s12">
      <div class="row">
        <div class="input-field col s12">
          <p>브레인스토밍 진행중입니다. 정말로 나가시겠습니까?</p>
        </div>
      </div>
    </form>
  </div>
    </div>
    <div class="modal-footer">
      <a href="index.html" class="modal-action modal-close waves-effect waves-green btn-flat">예</a>
      <a class="modal-action modal-close waves-effect waves-green btn-flat">아니오</a>
    </div>
  </div>

  <!-- 입장 하기 modal -->
  <div id="mergeModal" class="modal modal-footer">
    <div class="modal-content">
      <h5>의견 그룹화</h5>
      <div class="row">
        <form id="exitForm" class="col s12">
          <div class="row">
            <div class="input-field col s12">
              <div class="row">
                <div class="input-field col s6">
                  <input id="mergeTitle" name="mergeTitle" type="text" class="validate">
                  <label for="mergeTitle">그룹명</label>
                </div>
                <div class="input-field col s6">
                  <input id="mergeComent" name="mergeComent" type="text" class="validate" placeholder="의견그룹에 의미를 부여합니다.">
                  <label for="mergeComent">코멘트</label>
                </div>
              </div>
              <p>설명 : 선택한 의견들을 그룹화하여 아래 표에 추가합니다. 성격이 비슷하거나 연관성있는 단어끼리 그룹화하세요. 그룹화된 의견은 수정하거나 삭제할 수 없습니다.</p>
            </div>
          </div>
        </form> 
      </div>
    </div>
    <div class="modal-footer">
      <a class="modal-action modal-close waves-effect waves-green btn-flat"
      onclick="setMerge(document.getElementById('mergeTitle').value, document.getElementById('mergeComent').value)">예</a>
      <a class="modal-action modal-close waves-effect waves-green btn-flat">아니오</a>
    </div>
  </div>

	<!-- Scripts -->
	<script src="http://cdnjs.cloudflare.com/ajax/libs/fabric.js/1.7.3/fabric.min.js"></script>
	<script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
	<script src="js/materialize.js"></script>
	<script src="js/init.js"></script>
	<script src="js/ClientWebSocket.js"></script>
  <script src="js/Chatting.js"></script>
	<script src="js/IdeaBoard.js"></script>
	<script type="text/javascript">

    modifyOpinion(); //canvas 내의 의견을 움직일 때 반응하는 리스너 함수

		function enterOpinion (event, input) {
			var isEntered = (event.keyCode == 13 && input.value != "")?  true : false;

			if (isEntered) {
        var data = setOpinion(input.value); //입력한 데이터를 바탕으로 의견텍스트를 생성 -> 중복인 경우 null

        if (data != null) { //이미 중복된 의견이면 의견을 전송하지 않음
          var json = {
            patternCode:2,
            id:"",
            data:data
          };
          // send(json); //서버로 의견 전송 작업
          add (json.data); //아이디어를 그리는 임시 코드
        }
				input.value = "";
			}
		}

		function enterMessage (event, input) {
			var isEntered = (event.keyCode == 13 && input.value != "")?  true : false;

			if (isEntered) {
        var json = {
          patternCode:1,
          id:"",
          data : {
            name:"",
            message:input.value
          }
        };

        //send(json); //서버로 메시지 전송 작업
        addChatMessage(json.data); //채팅 받는 임시 코드
				input.value = "";
			}
		}

    var $jq = jQuery.noConflict(); //충돌 방지

    $jq(document).ready(function() { //is show modal
      $jq('.modal').modal();
    });

	</script>
</body>
</html>